<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0-M10 from src/site/markdown/index.md at 2023-06-09
 | Rendered using Apache Maven Fluido Skin 2.0.0-M6
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0-M10" />
    <title>OpenWMS.org COMMON: Base Service Library – Purpose</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-2.0.0-M6.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-2.0.0-M6.min.js"></script>
    <style>.github-fork-ribbon:before { background-color: black; }</style>
  </head>
  <body class="topBarEnabled">
    <a class="github-fork-ribbon left-top" href="https://github.com/openwms/org.openwms.common.service.lib" data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a>
    <header id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
            <div class="container">
              <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
              </a>
          <nav class="nav-collapse">
<a class="brand" href="index.html"  title="OpenWMS.org"><img src="images/logo.png" alt="OpenWMS.org" />
</a>
            <ul class="nav">
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a title="Home">Home</a></li>
            <li><a href="rest/2.1.0-SNAPSHOT/api.html" title="REST API Documentation">REST API Documentation</a></li>
            <li><a href="https://wiki.butan092.startdedicated.de/projects/common-service/wiki" title="Wiki">Wiki</a></li>
            <li><a href="configuration.html" title="Configuration">Configuration</a></li>
            <li><a href="apidocs/index.html" title="Javadoc">Javadoc</a></li>
            <li><a href="2.1.0-SNAPSHOT/schemaspy/relationships.html" title="Database Schema">Database Schema</a></li>
            <li><a href="https://sonarcloud.io/dashboard?id=org.openwms:org.openwms.common.service.lib" title="Sonar">Sonar</a></li>
            <li><a href="jacoco-merged-test-coverage-report/index.html" title="Jacoco">Jacoco</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown">Project <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li class="dropdown-submenu">
<a href="project-info.html" title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                  <li><a title="About">About</a></li>
                  <li><a href="summary.html" title="Summary">Summary</a></li>
                  <li><a href="team.html" title="Team">Team</a></li>
                  <li><a href="issue-management.html" title="Issue Management">Issue Management</a></li>
                  <li><a href="ci-management.html" title="CI Management">CI Management</a></li>
                  <li><a href="scm.html" title="Source Code Management">Source Code Management</a></li>
              </ul>
            </li>
            <li class="dropdown-submenu">
<a href="project-reports.html" title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                  <li><a href="apidocs/index.html" title="Javadoc">Javadoc</a></li>
                  <li><a href="failsafe-report.html" title="Failsafe Report">Failsafe Report</a></li>
                  <li><a href="surefire-report.html" title="Surefire Report">Surefire Report</a></li>
                  <li><a href="schemaspy/index.html" title="SchemaSpy">SchemaSpy</a></li>
              </ul>
            </li>
        </ul>
      </li>
            </ul>
          </nav>
          <div class="nav-collapse">
          </div>
        </div>
      </div>
    </header>
    <div class="container">
      <header>
        <div id="banner">
          <div class="pull-left"></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2023-06-09<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 2.1.0-SNAPSHOT</li>
          </ul>
        </div>
      </header>
        <main id="bodyColumn" >
<section>
<h1>Purpose</h1>
<p>This service provides essential functionality to deal with <code>Locations</code>, <code>LocationGroups</code> and <code>TransportUnits</code>. An often referred example is
the ability to move a <code>TransportUnit</code> from a <code>Location</code> A to a <code>Location</code> B.</p>
<p><a href="https://github.com/openwms/org.openwms.common.service/actions/workflows/master-build.yml" class="externalLink"><img src="https://github.com/openwms/org.openwms.common.service/actions/workflows/master-build.yml/badge.svg" alt="Build status" /></a>
<a href="https://sonarcloud.io/dashboard?id=org.openwms:org.openwms.common.service" class="externalLink"><img src="https://sonarcloud.io/api/project_badges/measure?project=org.openwms:org.openwms.common.service&amp;metric=alert_status" alt="Quality" /></a>
<a href="LICENSE"><img src="https://img.shields.io/badge/License-Apache%202.0-blue.svg" alt="License" /></a>
<a href="https://search.maven.org/search?q=a:org.openwms.common.service" class="externalLink"><img src="https://img.shields.io/maven-central/v/org.openwms/org.openwms.common.service" alt="Maven central" /></a>
<a href="https://hub.docker.com/r/openwms/org.openwms.common.service" class="externalLink"><img src="https://img.shields.io/docker/pulls/openwms/org.openwms.common.service" alt="Docker pulls" /></a>
<a href="https://gitter.im/openwms/org.openwms?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" class="externalLink"><img src="https://badges.gitter.im/Join%20Chat.svg" alt="Join the chat at https://gitter.im/openwms/org.openwms" /></a></p>
<p><img src="images/class-overview.png" alt="ClassDiagram" /></p></section><section>
<h1>Build</h1>
<p>The module depends on OpenWMS.org CORE dependencies and one additional optional COMMON dependency that is only used in the enterprise
version and offers an additional API for the UI.</p>
<p><img src="images/maven-deps.drawio.png" alt="MavenDependencies" /></p>
<p>Build a runnable fat jar with the execution of all unit and in-memory database integration tests, but without a required <a href="https://www.rabbitmq.com" class="externalLink">RabbitMQ</a>
server to run:</p>

<div class="verbatim">
<pre><code>$ ./mvnw package
</code></pre></div>
<p>To also build and run with <a href="https://www.rabbitmq.com" class="externalLink">RabbitMQ</a> support call:</p>

<div class="verbatim">
<pre><code>$ ./mvnw package -DsurefireArgs=-Dspring.profiles.active=ASYNCHRONOUS,TEST
</code></pre></div>
<p>This requires a <a href="https://www.rabbitmq.com" class="externalLink">RabbitMQ</a> server running locally with default settings.</p></section><section>
<h1>Run</h1><section>
<h2>Run On Command Line</h2>
<p>After the binary has been built it can be started from command line. By default no other infrastructure services are required to run this
service.</p>

<div class="verbatim">
<pre><code>$ java -jar target/openwms-common-service-exec.jar
</code></pre></div>
<p>In a distributed environment the service configuration is fetched from the central <a href="https://github.com/spring-labs/org.openwms.configuration" class="externalLink">OpenWMS.org Configuration Service</a>.
This behavior can be enabled by activating the Spring Profile <code>DISTRIBUTED</code>. Additionally it makes sense to enable asynchronous
communication that requires a running <a href="https://www.rabbitmq.com" class="externalLink">RabbitMQ</a> instance - just add another profile <code>ASYNCHRONOUS</code>. If the latter
is not applied all asynchronous AMQP endpoints are disabled and the service does not send any events nor does it receive application events
from remote services. The AMQP protocol with the <a href="https://www.rabbitmq.com" class="externalLink">RabbitMQ</a> is currently the only supported message broker. But
switching to others, like <a href="https://www.hivemq.com" class="externalLink">HiveMQ (MQTT)</a> or <a href="https://kafka.apache.org/" class="externalLink">Apacha Kafka</a>, is not rocket science.</p>

<div class="verbatim">
<pre><code>$ java -jar target/openwms-common-service-exec.jar --spring.profiles.active=DISTRIBUTED,ASYNCHRONOUS
</code></pre></div>
<p>With these profiles applied the OpenWMS.org Configuration Service is tried to be discovered at service startup. The service fails to start
if no instance of the configuration service is available after a configured amount of retries.</p></section><section>
<h2>Run as Docker Container</h2>
<p>Instead of building the software from the sources and run it as Java program on the JVM it can also be fetched as a Docker image from
<a href="https://hub.docker.com/repository/docker/openwms/org.openwms.common.service" class="externalLink">Docker Hub</a> and started as a Docker container.</p>

<div class="verbatim">
<pre><code>$ docker run openwms/org.openwms.common.service:latest
</code></pre></div></section></section><section>
<h1>Release</h1>
<p>Releasing a new stable version of the software to <a href="https://search.maven.org/" class="externalLink">Maven Central</a> is usually done by the service maintainers
only. To build an optimized and signed binary version and upload it to the Sonatype Staging Repository call:</p>

<div class="verbatim">
<pre><code>$ ./mvnw deploy -Prelease,gpg
</code></pre></div>
<p>After it is uploaded, Sonatype runs a couple of quality checks before it can be manually released to <a href="https://search.maven.org/" class="externalLink">Maven Central</a>.</p><section>
<h2>Release Documentation</h2>
<p>To release the API documentation as a static website manually just call the following two Maven commands. This is integrated into the
automated build pipeline as well.</p>

<div class="verbatim">
<pre><code>$ ./mvnw package -DsurefireArgs=-Dspring.profiles.active=ASYNCHRONOUS,TEST
$ ./mvnw site scm-publish:publish-scm
</code></pre></div></section></section>
        </main>
    </div>
    <hr/>
    <footer>
      <div class="container">
        <div class="row">
            <p>©      2005–2023
<a href="https://www.interface21.io">Interface21.io</a>
</p>
        </div>
        <p id="poweredBy" class="pull-right"><a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
</p>
      </div>
    </footer>
<script>
  if(anchors) {
    anchors.add();
  }
</script>
  </body>
</html>